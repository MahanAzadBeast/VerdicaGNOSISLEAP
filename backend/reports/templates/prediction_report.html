<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <style>
    @page { 
      margin: 25mm 20mm; 
      @top-center {
        content: "Veridica AI - Target Activity Report";
        font-size: 10pt;
        color: #64748b;
      }
    }
    body { 
      font-family: "Inter", -webkit-system-font, "Segoe UI", sans-serif; 
      font-size: 11pt; 
      color: #334155; 
      background: #ffffff; 
      line-height: 1.4;
    }
    
    header { 
      display: flex; 
      align-items: center; 
      margin-bottom: 24px; 
      padding-bottom: 16px;
      border-bottom: 2px solid #e2e8f0;
    }
    header img { 
      height: 40px; 
      margin-right: 12px; 
    }
    h1 { 
      font-size: 18pt; 
      color: #1e293b; 
      margin: 0; 
      font-weight: 700;
    }
    
    .meta-info {
      background: #f8fafc;
      padding: 12px 16px;
      border-radius: 8px;
      margin-bottom: 20px;
      font-size: 10pt;
      color: #475569;
    }
    
    table { 
      width: 100%; 
      border-collapse: separate; 
      border-spacing: 0 2px; 
      margin-bottom: 20px;
    }
    thead th { 
      text-align: left; 
      font-weight: 600; 
      padding: 10px 8px; 
      color: #1e293b; 
      background: #f1f5f9;
      border-top: 1px solid #cbd5e1;
      border-bottom: 1px solid #cbd5e1;
      font-size: 10pt;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    thead th:first-child { border-left: 1px solid #cbd5e1; border-radius: 6px 0 0 6px; }
    thead th:last-child { border-right: 1px solid #cbd5e1; border-radius: 0 6px 6px 0; }
    
    tbody td { 
      padding: 8px; 
      border-radius: 4px;
      font-size: 10pt;
    }
    tbody tr:nth-child(even) {
      background: #fafafa;
    }
    
    .target-cell {
      font-weight: 600;
      color: #1e293b;
    }
    
    .heat-cell { 
      color: #fff !important; 
      font-weight: 600; 
      text-align: center;
      border-radius: 6px;
      padding: 8px 6px !important;
      font-family: "JetBrains Mono", "Consolas", monospace;
    }
    
    .confidence-cell {
      text-align: center;
      font-weight: 500;
    }
    
    .selectivity-chip {
      display: inline-block;
      padding: 2px 6px;
      border-radius: 12px;
      font-size: 9pt;
      font-weight: 500;
      text-align: center;
    }
    
    .selective { background: #dcfce7; color: #166534; }
    .moderate { background: #fef3c7; color: #92400e; }
    .non-selective { background: #fee2e2; color: #991b1b; }
    .panel-na { background: #f1f5f9; color: #64748b; }
    
    .summary {
      background: #f8fafc;
      padding: 16px;
      border-radius: 8px;
      margin: 20px 0;
      border-left: 4px solid #3b82f6;
    }
    
    footer { 
      margin-top: 32px; 
      padding-top: 16px;
      border-top: 1px solid #e2e8f0;
      font-size: 9pt; 
      color: #64748b;
      text-align: center;
    }
    
    .warning-banner {
      background: #fef3c7;
      border: 1px solid #f59e0b;
      border-radius: 6px;
      padding: 8px 12px;
      margin: 16px 0;
      font-size: 10pt;
      color: #92400e;
      text-align: center;
    }
  </style>
</head>
<body>

<header>
  <img src="{{ logo_path }}" alt="Veridica AI"/>
  <div>
    <h1>üß¨ Target Activity Report</h1>
    <div style="font-size: 12pt; color: #64748b; margin-top: 4px;">
      {{ compound_name }} ‚Ä¢ {{ smiles }}
    </div>
  </div>
</header>

<div class="meta-info">
  <strong>Generated:</strong> {{ timestamp }} &nbsp;‚Ä¢&nbsp; 
  <strong>Model:</strong> {{ model_name }} (R¬≤ = {{ r2 }}) &nbsp;‚Ä¢&nbsp;
  <strong>Total Predictions:</strong> {{ total_predictions }}
</div>

<div class="warning-banner">
  üîç In-silico estimates ‚Äì wet-lab validation required before decision making.
</div>

<table>
  <thead>
    <tr>
      <th>Target Protein</th>
      <th>Potency (ŒºM)</th>
      <th>pIC‚ÇÖ‚ÇÄ</th>
      <th>Selectivity</th>
      <th>Confidence</th>
      <th>Assay Type</th>
    </tr>
  </thead>
  <tbody>
  {% for row in predictions %}
    <tr>
      <td class="target-cell">{{ row.protein }}</td>
      <td class="heat-cell" style="background-color: {{ row.heat_bg }}; opacity: {{ row.opacity }}">
        {{ row.display_ic50 }}
      </td>
      <td style="text-align: center; font-family: monospace;">{{ row.pic50 }}</td>
      <td style="text-align: center;">
        <span class="selectivity-chip {{ row.selectivity_class }}">
          {{ row.selectivity_icon }} {{ row.selectivity_label }}
        </span>
      </td>
      <td class="confidence-cell">{{ row.confidence_percent }}%</td>
      <td style="text-align: center;">
        <span style="background: {{ row.assay_bg }}; color: {{ row.assay_color }}; padding: 2px 6px; border-radius: 4px; font-size: 9pt;">
          {{ row.assay }}
        </span>
      </td>
    </tr>
  {% endfor %}
  </tbody>
</table>

<div class="summary">
  <div style="display: flex; justify-content: space-between; flex-wrap: wrap; gap: 16px;">
    <div><strong>Average Confidence:</strong> {{ avg_confidence }}%</div>
    <div><strong>Molecular Properties:</strong> LogP = {{ logp }}, LogS = {{ logs }}</div>
    <div><strong>Highest Potency:</strong> {{ highest_potency_target }} ({{ highest_potency_value }})</div>
  </div>
</div>

<footer>
  <p><strong>Veridica AI GNOSIS Platform</strong> | Advanced Drug Discovery Intelligence</p>
  <p>üî¨ This report contains computational predictions for research purposes only. 
     Experimental validation in appropriate biological systems is required before any therapeutic development decisions.</p>
  <p style="font-size: 8pt; margin-top: 8px;">
    Generated on {{ timestamp }} ‚Ä¢ Report ID: {{ report_id }}
  </p>
</footer>

</body>
</html>